<% if (getPackageName(currentModelElement) != "") { %>
package ${getPackageName(currentModelElement)};
<% } %>

/**
 * Autogenerated class ${currentModelElement.name}
 */
public class ${currentModelElement.name} {
        <%
		def belongsToMap = [:]
		def hasManyMap = [:]
		def embeddedList =[]
		def attributeConstrainsMap=[:]
        getAttributes(currentModelElement).each { attribute ->
                def attributeName = attribute.name
                def attributeType = javaType(attribute.type)
                
%>
	${attributeType} ${attributeName}
<%
			def attributeContrains = taggedValueMap(attribute)
        	attributeConstrainsMap.put("${attributeName}",attributeContrains)
        }
        getAssociationEnds(model, currentModelElement).each { sourceEnd ->
                def association = sourceEnd.association
                def targetEnd = association.connection.find { end -> end != sourceEnd }
				def targetType = getEndType(targetEnd)
				def targetName = getEndName(targetEnd)
				def	className = "${targetEnd.participant.name}"//"${firstCharUpper(targetName)[0..-2]}"
                if (!sourceEnd.isNavigable()&&targetEnd.isNavigable()) {
						if(isOneToOne(sourceEnd, targetEnd)){
%>	${firstCharUpper(targetName)} ${targetName}
<%
						} else if(isManyToMany(sourceEnd, targetEnd)){
							hasManyMap.put(targetName,className)
						}
                } else if (sourceEnd.isNavigable() && !targetEnd.isNavigable()){
						if(isOneToOne(sourceEnd, targetEnd)){
							belongsToMap.put("${firstCharLower(targetName)}",className)
						} else if(isManyToMany(sourceEnd, targetEnd)){
							belongsToMap.put("${firstCharLower(className)}",className)
							hasManyMap.put(targetName,className)
						}
				} else if (sourceEnd.isNavigable()&&targetEnd.isNavigable()) {
						if(isComposite(sourceEnd)) {
%>	${firstCharUpper(targetName)} ${targetName}
<%
						embeddedList.add(targetName as String)
						} else if(!isComposite(sourceEnd) && !isComposite(targetEnd) && isOneToMany(sourceEnd, targetEnd)){
							hasManyMap.put(targetName,className)
						}
				}
		}
	if(belongsToMap.size()>0){
%>	static belongsTo = ${belongsToMap}
<%
	} 
	if(hasManyMap.size()>0){	
%>	static hasMany = ${hasManyMap}
<%
	}
	if(embeddedList.size()>0) {
%>	static embedded = ${embeddedList}
<%
	}
	if(attributeConstrainsMap.size()>0) {
%>	static constraints = { <%
		attributeConstrainsMap.each{key, value ->
		  def valueBuffer = new StringBuffer()
			value.each { keyContrain, valueContrain ->
					if (valueBuffer.length() > 0) {
			        	valueBuffer.append(",")
			        }
			         valueBuffer.append(keyContrain+":"+valueContrain)
			}
%>
		${key}(${valueBuffer.toString()})<%	
		} 
%>	
	}
<%
	}
%>
}